# 메모리 최적화

### 데이터 압축 사용 및 메모리 정리

    1. ziplist / intset 자료구조를 이용해 최적화
    2. 데이터 압축 & 효율적 저장

### LRU / LFU 정책

    1. Least Recently Used / Least Frequently Used 알고리즘 - 메모리 부족 시 데이터 삭제 기준

### RDB

    1. 데이터를 스냅샷 형태로 디스크에 저장 (주기적) - PITR 불가능 [ 성능 우선 ]

### AOF

    1. 데이터 변경 사항을 순차적으로 기록 [ 데이터 손실 최소화 ]

        a. 로그로 인해 시스템 부하상승
        b. AOF 압축 OR 재작성 로직을 통해 AOF 자체 파일크기 축소

### 파티셔닝

    1. 여러 노드에 슬롯기반 데이터 분산 저장 -> 수평적 확장 제공 & 부하 분산

### Time To Live(TTL) 설정

    1. 일정 시간 후 데이터 삭제 ( 불필요 데이터 삭제 - 메모리 효율화 )

### PipeLining

    1. 다수의 명령어 동시 전송 - 네트워크 오버헤드 감소

---

# 트러블 슈팅

### 메모리 부족

    1. 데이터 양 증가 (캐시 데이터 / 대규모 키 저장소) - maxmemory / LRU LFU / 데이터 압축 및 타입 최적화

### 복제 지연

    1. Redis Sentinal 구조에서 Master -Slave간 데이터 동기화 지연 심화될 때 - 복제 압축 / 비동기 복제 / Slave 성능 최적화[Vertical Scaling]

### 데이터 영속성 & 복구 시간

    AOF는 파일 압축 / 재작성 필요 -> RDB와 AOF 병행

---

# 아키텍쳐 예시

1. 전자상거래 / App 세션 관리

   Redis : 캐시로 활용 (DB 읽기 부하 감소)
   DB : 트랜잭션 OR 복잡한 쿼리 -> 일관성 유지, 복잡한 작업 처리

2. 실시간 로그 처리 / 실시간 알림 시스템

   Redis : 데이터 캐시
   Kafka : 데이터 스트리밍 & 이벤트 처리

3. 전자 상거래 검색 / 로그 분석

   Redis : 데이터 캐시
   ElasticSearch : 검색 엔진
